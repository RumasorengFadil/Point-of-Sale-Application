import{W as T,j as e}from"./app-BoPzKC54.js";import{u as w,F as P}from"./useImagePreview-CyPjDCA0.js";import{F as u}from"./FormField-B7t40N4K.js";import{F as x,a as p,b as S}from"./FormSelectField-BMcyL8Bb.js";import{P as D}from"./PrimaryButton-DUna3vAo.js";import{T as _}from"./SectionTitle-nPVfHa3A.js";import{S as A}from"./SpinnerWithLabel-Ruk5H2G2.js";import{w as L}from"./WithLoading-CPIKsqqd.js";import{c as W}from"./convertToNumber-C9xeMRjC.js";import{f as B}from"./formatNumberWithDots-Do-x_jmg.js";import{t as b}from"./toastUtils-0qLyJDVA.js";import{t as f}from"./toTitleCase-Br9ZpEl_.js";const O=(s,o)=>({data:s,setData:o,handleChange:a=>{o(i=>({...i,[a.target.name]:a.target.value}))},handleNumberChange:(a,i)=>{const l=W(a.target.value);/^\d*$/.test(l)&&(l.toString().length>i||o(d=>({...d,[a.target.name]:l})))}});function K(s){if(!s||typeof s!="object")throw new Error("Parameter harus berupa objek yang valid");return Object.keys(s).length===0}function Y({journalCategories:s,journalTypes:o,routeName:v="",formTitle:h="",journalEntry:a={}}){const{imagePreview:i,handleFileChange:l,setImagePreview:d}=w(),{post:N,processing:y,data:n,setData:g,errors:m,reset:C}=T({categoryId:a.category_id||"",typeId:a.type_id||"",inputDate:a.input_date||"",nominal:a.nominal??"",description:a.description||"",evidence:""}),{handleChange:c,handleNumberChange:F}=O(n,g),k=L({SpinnerWithLabel:A})(P),j=a.id?route("accounting-journal-entry.update",a.id):route("accounting-journal-entry.store"),I=t=>{t.preventDefault(),N(j,{onSuccess:r=>{b.showSuccess(r.props.flash),K(a)&&(C(),d(""))},onError:r=>{b.showError(r)}})};return e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(_,{boldText:h,subtitle:"Kas"}),e.jsxs(x,{onChange:c,name:"typeId",label:"Jenis Transaksi*",value:n.typeId,error:m.typeId,className:"px-4",children:[e.jsx(p,{value:"",label:"Pilih"}),o.map((t,r)=>e.jsx(p,{value:t.id,label:f(t.type_name)},r))]}),e.jsxs(x,{onChange:c,name:"categoryId",label:"Kategori Transaksi*",value:n.categoryId,error:m.categoryId,className:"px-4",children:[e.jsx(p,{value:"",label:"Pilih"}),s.map((t,r)=>e.jsx(p,{value:t.id,label:f(t.category_name)},r))]}),e.jsx(u,{onChange:c,name:"inputDate",label:"Tanggal Transaksi*",type:"date",value:n.inputDate,error:m.inputDate,className:"px-4"}),e.jsx(u,{onChange:t=>F(t,11),label:"Nominal*",type:"text",name:"nominal",value:B(n.nominal),error:m.nominal,className:"px-4"}),e.jsx(u,{onChange:c,name:"description",placeholder:"exp : Pembelian bahan baku",label:"Deskripsi Transaksi*",type:"text",value:n.description,error:m.description,className:"px-4"}),e.jsx(S,{onChange:t=>l(t,r=>g("evidence",r)),label:"Bukti Transaksi",className:"px-4",imagePreview:i}),e.jsxs("div",{className:"flex px-4 w-1/2 space-x-4",children:[e.jsx(k,{isLoading:y,className:"flex-auto",onSave:I}),e.jsx(D,{onClick:()=>history.back(),className:"flex-auto bg-gray-400 text-black",children:"Batal"})]})]})}export{Y as A};
