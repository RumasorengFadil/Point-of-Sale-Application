import{j as e,r as i,a as h,Y as w}from"./app-WCegPq-r.js";import{A as P}from"./ApplicationLayout-Bi4_1TNQ.js";import{a as j,e as p,b as B,d as b,P as I,D as k,g as z,R as v,B as g,C as F}from"./ReactIconFigure-5Lekt4IM.js";import{f as u}from"./formatNumberWithDots-Do-x_jmg.js";import{e as T}from"./index-Bw7cKCP1.js";import{T as R}from"./TextInput-DavlLJrx.js";import{d as y}from"./react-CAgJOoTK.js";import{C as S}from"./Card-ZQNOarfO.js";import{A as $}from"./ApplicationLogo-CTLyRIuO.js";import{c as A}from"./index-223J7_Ns.js";import{b as D}from"./index-C6AjorAK.js";import{t as L}from"./toTitleCase-Br9ZpEl_.js";import"./react-toastify.esm-BfxcDOty.js";import"./index-BbTsefQK.js";import"./iconBase-NRzPwxTJ.js";import"./LabelWithIcon-DX8VBa1R.js";import"./PrimaryButton-DC6gsTU9.js";import"./index-DVWNS8k7.js";const _=({caption:s,className:t,children:o,size:a="sm"})=>e.jsx("figcaption",{className:`text-center text-${a} ${t}`,children:o||s}),E=()=>e.jsx("div",{className:"hidden lg:flex justify-center",children:e.jsx($,{className:"w-24"})}),H=i.memo(function({products:t,className:o=""}){const a=j(n=>n.cart),c=p(n=>n.showCart),r=p(n=>n.setShowCart),{total:l}=B(t,a);return e.jsx("div",{className:`flex flex-col px-4 lg:hidden ${o}`,children:e.jsx(b,{label:"Cart",summary:u(l),onClick:()=>r(!c)})})});function M({className:s="",onChange:t}){return e.jsx("div",{className:"flex px-4 justify-between items-center w-full "+s,children:e.jsxs("div",{className:"flex w-full relative shadow-sm",children:[e.jsx(T,{className:"absolute text-gray-400 h-full left-4",size:24}),e.jsx(R,{className:"w-full px-12 py-3 placeholder-gray-400",type:"text",placeholder:"cari",onChange:t})]})})}const C=y(s=>({searchResult:[],setSearchResult:t=>s({searchResult:t})})),O=(s,t,o)=>{if(!t.trim())return s;const a=t.toLowerCase();return s.filter(c=>o.some(r=>String(c[r]).toLowerCase().includes(a)))};function U({products:s}){const t=C(a=>a.setSearchResult);i.useEffect(()=>{t(s)},[s,t]);const o=i.useCallback(a=>{const c=a.target.value,r=O(s,c,["name","price"]);t(r)},[s,t]);return e.jsx(M,{onChange:o})}const V=i.memo(U),x=y(s=>({category:"makanan",setCategory:t=>s({category:t})})),W=({src:s,figCaption:t="",className:o,children:a,rounded:c="",alt:r})=>e.jsxs("figure",{className:"flex flex-col space-y-2 "+o,children:[e.jsx("img",{className:`w-full rounded-${c}`,src:s,alt:r}),a||e.jsx(_,{caption:t})]}),Y=s=>"/storage/uploads/POS/img/products/"+s,q=i.memo(function({product:t,onClick:o}){const{id:a,name:c,image:r,price:l,discount:n,discountedPrice:m=0}=t,[d,f]=i.useState(!1),N=()=>{f({isBlinking:!0,productId:t.id}),setTimeout(()=>f(!1),500)};return e.jsx(S,{onClick:()=>{o(),N()},className:`flex w-full h-52 flex-col py-10 items-center justify-center space-y-3 bg-white text-xs transition-all duration-500 ${d?"opacity-40":""}`,children:e.jsxs(W,{alt:c,rounded:"md",className:"w-24 text-center",src:Y(r),children:[e.jsxs("div",{children:[e.jsx(I,{className:n?"line-through":"",price:l}),n>0&&e.jsx(k,{discountedPrice:m})]}),e.jsx("p",{className:"font-bold",children:c})]})},a)}),G=i.memo(()=>{const s=x(r=>r.category),t=C(r=>r.searchResult),o=j(r=>r.handleAddToCart),a=r=>{o(r)},c=t.filter(r=>r.category.category_name===s);return e.jsx("div",{className:"h-full px-4 overflow-auto py-2 w-full",children:e.jsx("div",{className:"grid grid-cols-2 gap-7 sm:grid-cols-3",children:c.map(r=>e.jsx("div",{children:e.jsx(q,{onClick:()=>a(r),product:z(r,({price:l,discountedPrice:n})=>({price:u(l),discountedPrice:u(n)}))})},r.id))})})}),J=({reactIcon:s,figCaption:t="",className:o,children:a,size:c="base",isSelected:r=!1,classNameIfTrue:l="",classNameIfFalse:n=""})=>{const m={sm:{iconSize:20,captionSize:"xs"},base:{iconSize:24,captionSize:"xs"},md:{iconSize:28,captionSize:"sm"}}[c],d={makanan:e.jsx(D,{size:m.iconSize}),minuman:e.jsx(A,{size:m.iconSize})}[s];return e.jsx(v,{figCaption:t,reactIcon:d,children:a,className:o,captionSize:m.captionSize,isSelected:r,classNameIfTrue:l,classNameIfFalse:n})},K=i.memo(({categories:s})=>{const t=x(a=>a.category),o=x(a=>a.setCategory);return e.jsx("div",{className:"flex flex-row lg:flex-col px-4 gap-5 items-center",children:s.map(a=>e.jsx(S,{onClick:()=>o(a.category_name),className:`h-20 w-full lg:w-20 ${t===a.category_name?"bg-primary":"bg-white"}`,children:e.jsx(J,{reactIcon:a.category_name,figCaption:L(a.category_name),className:"items-center",isSelected:t===a.category_name,classNameIfTrue:"text-white"})},a.id))})}),Q=({auth:s,className:t=""})=>e.jsx(e.Fragment,{children:s.guard.name==="web"?e.jsx(h,{href:route("pos-dashboard.index"),className:t,children:e.jsx(g,{className:"px-4"})}):e.jsx(h,{href:route("transaction-report.index"),className:t,children:e.jsx(g,{className:"px-4"})})});function pe({auth:s,products:t,categories:o}){const a=e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Transaction"}),e.jsx(Q,{auth:s}),e.jsx(E,{}),e.jsx(K,{categories:o})]}),c=e.jsxs(e.Fragment,{children:[e.jsx(V,{products:t}),e.jsx(G,{}),e.jsx(H,{products:t})]}),r=e.jsx(e.Fragment,{children:e.jsx(F,{products:t})});return e.jsx(P,{header:a,content:c,footer:r,className:"lg:space-x-4",headerClassName:"py-4 space-y-4",contentClassName:"py-4",withContainerSpace:!1})}export{pe as default};
