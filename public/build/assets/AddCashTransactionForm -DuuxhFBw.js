import{W as I,j as e}from"./app-ApmZJA6T.js";import{u as T,F as w}from"./useImagePreview-BuLTuRNT.js";import{F as h}from"./FormField-CyJBThLo.js";import{F as b,a as p,b as P}from"./FormSelectField-Dg2wK7UY.js";import{P as S}from"./PrimaryButton-CMcKOuR4.js";import{T as D}from"./SectionTitle-CbQ6bhoV.js";import{S as _}from"./SpinnerWithLabel-BMY7Xu_w.js";import{w as A}from"./WithLoading-Cykf3tBp.js";import{c as L}from"./convertToNumber-C9xeMRjC.js";import{f as W}from"./formatNumberWithDots-Do-x_jmg.js";import{t as f}from"./toastUtils-BsQoU_eu.js";import{t as v}from"./toTitleCase-Br9ZpEl_.js";const B=(r,n)=>({data:r,setData:n,handleChange:a=>{n(o=>({...o,[a.target.name]:a.target.value}))},handleNumberChange:(a,o)=>{const l=L(a.target.value);/^\d*$/.test(l)&&(l.toString().length>o||n(d=>({...d,[a.target.name]:l})))}});function O(r){if(!r||typeof r!="object")throw new Error("Parameter harus berupa objek yang valid");return Object.keys(r).length===0}function X({journalCategories:r,journalTypes:n,routeName:u="",formTitle:g="",journalEntry:a={}}){const{imagePreview:o,handleFileChange:l,setImagePreview:d}=T(),{post:N,processing:y,data:i,setData:x,errors:m,reset:C}=I({categoryId:a.category_id||"",typeId:a.type_id||"",inputDate:a.input_date||"",nominal:a.nominal??"",description:a.description||"",evidence:""}),{handleChange:c,handleNumberChange:F}=B(i,x),k=A({SpinnerWithLabel:_})(w),j=t=>{t.preventDefault(),N(route(u,a.id||""),{onSuccess:s=>{f.showSuccess(s.props.flash),O(a)&&(C(),d(""))},onError:s=>{f.showError(s)}})};return e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(D,{boldText:g,subtitle:"Kas"}),e.jsxs(b,{onChange:c,name:"typeId",label:"Jenis Transaksi*",value:i.typeId,error:m.typeId,className:"px-4",children:[e.jsx(p,{value:"",label:"Pilih"}),n.map((t,s)=>e.jsx(p,{value:t.id,label:v(t.type_name)},s))]}),e.jsxs(b,{onChange:c,name:"categoryId",label:"Kategori Transaksi*",value:i.categoryId,error:m.categoryId,className:"px-4",children:[e.jsx(p,{value:"",label:"Pilih"}),r.map((t,s)=>e.jsx(p,{value:t.id,label:v(t.category_name)},s))]}),e.jsx(h,{onChange:c,name:"inputDate",label:"Tanggal Transaksi*",type:"date",value:i.inputDate,error:m.inputDate,className:"px-4"}),e.jsx(h,{onChange:t=>F(t,11),label:"Nominal*",type:"text",name:"nominal",value:W(i.nominal),error:m.nominal,className:"px-4"}),e.jsx(h,{onChange:c,name:"description",placeholder:"exp : Pembelian bahan baku",label:"Deskripsi Transaksi*",type:"text",value:i.description,error:m.description,className:"px-4"}),e.jsx(P,{onChange:t=>l(t,s=>x("evidence",s)),label:"Bukti Transaksi",className:"px-4",imagePreview:o}),e.jsxs("div",{className:"flex px-4 w-1/2 space-x-4",children:[e.jsx(k,{isLoading:y,className:"flex-auto",onSave:j}),e.jsx(S,{onClick:()=>history.back(),className:"flex-auto bg-gray-400 text-black",children:"Batal"})]})]})}export{X as A};
