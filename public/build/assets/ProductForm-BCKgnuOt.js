import{W as y,j as r}from"./app-b_63VYOJ.js";import{F as i}from"./FormField-CmI-2fEl.js";import{F as P,a as p,b as C}from"./FormSelectField-BbkGn8_R.js";import{P as S}from"./PrimaryButton-RT_eZQ3H.js";import{T as w}from"./SectionTitle-6gZstBBW.js";import{w as I}from"./WithLoading-C95Ejlzf.js";import{t as T}from"./toTitleCase-Br9ZpEl_.js";import{S as D}from"./SpinnerWithLabel-Dc370SSn.js";import{u as E,F as L}from"./useImagePreview-Bx3_gJUK.js";import{t as u}from"./toastUtils-Dml8uuJS.js";import{f as M}from"./formatNumberWithDots-Do-x_jmg.js";import{c as W}from"./convertToNumber-C9xeMRjC.js";function G({categories:d,product:o={},action:m}){var c;const{imagePreview:g,handleFileChange:x,setImagePreview:h}=E(),{post:f,data:s,setData:n,errors:t,reset:b,processing:k}=y({name:o.name||"",categoryId:((c=o.category)==null?void 0:c.id)||"",price:o.price||0,discount:o.discount||0,stock:o.stock||0,image:null}),l=e=>{n(a=>({...a,[e.target.name]:e.target.value}))},v=e=>{e.target.value===""&&n("price","");const a=W(e.target.value);a.toString().length>8||a&&n(N=>({...N,[e.target.name]:a}))},j=e=>{e.preventDefault(),f(route(`product.${m}`,o.id??null),{onSuccess:a=>{u.showSuccess(a.props.flash),h(""),m==="store"&&b()},onError:a=>{u.showError(a)}})},F=I({SpinnerWithLabel:D})(L);return r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsx(w,{boldText:"Edit",subtitle:"Produk"}),r.jsx(i,{onChange:l,name:"name",label:"Nama Produk",type:"text",placeholder:"Masukan Nama Produk",value:s.name,error:t.name,className:"px-4"}),r.jsxs(P,{onChange:l,name:"categoryId",label:"Kategori",value:s.categoryId,error:t.categoryId,className:"px-4",children:[r.jsx(p,{value:"",label:"Pilih"}),d.map((e,a)=>r.jsx(p,{value:e.id,label:T(e.category_name)},a))]}),r.jsx(i,{onChange:v,name:"price",label:"Harga Jual (Rp)*",placeholder:"Masukan Harga Jual",type:"text",value:M(s.price),error:t.price,className:"px-4"}),r.jsx(i,{onChange:l,name:"discount",label:"Diskon (%)*",placeholder:"Masukan diskon",type:"number",value:s.discount,error:t.discount,className:"px-4",min:"0",step:"1"}),r.jsx(i,{onChange:l,name:"stock",label:"Stok*",placeholder:"Masukan Stok",type:"number",value:s.stock,error:t.stock,className:"px-4",min:"0",step:"1"}),r.jsx(C,{onChange:e=>x(e,a=>n("image",a)),label:"Pilih Foto",className:"px-4",imagePreview:g}),r.jsxs("div",{className:"flex px-4 w-1/2 space-x-4",children:[r.jsx(F,{isLoading:k,className:"flex-auto",onSave:j}),r.jsx(S,{onClick:()=>history.back(),className:"flex-auto bg-gray-400 text-black",children:"Cancel"})]})]})}export{G as P};
