import{W as y,j as r}from"./app-CiUH9Rcw.js";import{F as i}from"./FormField-B94imBDF.js";import{F as P,a as p,b as C}from"./FormSelectField-Bt5dk2hu.js";import{P as S}from"./PrimaryButton-CnIEHHh0.js";import{T as w}from"./SectionTitle-B1vBUY-5.js";import{w as I}from"./WithLoading-DMX48q-K.js";import{t as T}from"./toTitleCase-Br9ZpEl_.js";import{S as D}from"./SpinnerWithLabel-BRSrECz2.js";import{u as E,F as H}from"./useImagePreview-C4AAudFS.js";import{t as u}from"./toastUtils-B7C_oE0O.js";import{f as J}from"./formatNumberWithDots-Do-x_jmg.js";import{c as L}from"./convertToNumber-C9xeMRjC.js";function G({categories:g,product:o={},action:m}){var c;const{imagePreview:d,handleFileChange:x,setImagePreview:h}=E(),{post:f,data:s,setData:l,errors:t,reset:b,processing:v}=y({name:o.name||"",categoryId:((c=o.category)==null?void 0:c.id)||"",price:o.price||0,discount:o.discount||0,stock:o.stock||"",image:null}),n=e=>{l(a=>({...a,[e.target.name]:e.target.value}))},k=e=>{e.target.value===""&&l("price","");const a=L(e.target.value);a.toString().length>8||a&&l(N=>({...N,[e.target.name]:a}))},j=e=>{e.preventDefault(),f(route(`product.${m}`,o.id??null),{onSuccess:a=>{u.showSuccess(a.props.flash),h(""),m==="store"&&b()},onError:a=>{u.showError(a)}})},F=I({SpinnerWithLabel:D})(H);return r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsx(w,{boldText:"Edit",subtitle:"Produk"}),r.jsx(i,{onChange:n,name:"name",label:"Nama Produk",type:"text",placeholder:"Masukan Nama Produk",value:s.name,error:t.name,className:"px-4"}),r.jsxs(P,{onChange:n,name:"categoryId",label:"Kategori",value:s.categoryId,error:t.categoryId,className:"px-4",children:[r.jsx(p,{value:"",label:"Pilih"}),g.map((e,a)=>r.jsx(p,{value:e.id,label:T(e.category_name)},a))]}),r.jsx(i,{onChange:k,name:"price",label:"Harga Jual (Rp)*",placeholder:"Masukan Harga Jual",type:"text",value:J(s.price),error:t.price,className:"px-4"}),r.jsx(i,{onChange:n,name:"discount",label:"Diskon (%)*",placeholder:"Masukan Harga Jual",type:"number",value:s.discount,error:t.discount,className:"px-4",min:"0",step:"1"}),r.jsx(i,{onChange:n,name:"stock",label:"Stok*",placeholder:"Masukan Harga Jual",type:"number",value:s.stock,error:t.stock,className:"px-4",min:"0",step:"1"}),r.jsx(C,{onChange:e=>x(e,a=>l("image",a)),label:"Pilih Foto",className:"px-4",imagePreview:d}),r.jsxs("div",{className:"flex px-4 w-1/2 space-x-4",children:[r.jsx(F,{isLoading:v,className:"flex-auto",onSave:j}),r.jsx(S,{onClick:()=>history.back(),className:"flex-auto bg-gray-400 text-black",children:"Cancel"})]})]})}export{G as P};
