import{j as e,r as T,Y as S}from"./app-b_63VYOJ.js";import{S as P}from"./StatsOverview-BKy7LN6e.js";import{M as k}from"./Modal-sR4dNxIy.js";import{R as L}from"./Receipt-iznYsWZG.js";import{T as R,a as C,b as s,c as v,d as F}from"./TableRow-BT99GWFW.js";import{V as y,D as I,P as _,a as $,b as M,c as a,d as A,e as H,T as O,S as W,f as q}from"./PdfTableBody-BYNmHm4I.js";import{f as h}from"./formatNumberWithDots-Do-x_jmg.js";import{b as z}from"./index-BMgCoJCw.js";import{P as B}from"./Pagination-CgSjoba4.js";import{M as E}from"./MonthRangeFilter-GQEeQb_h.js";import{P as G}from"./POSLayout-CsalDYDv.js";import"./index-rPT0qQ78.js";import"./iconBase-Fa3dwFrb.js";import"./index-lAxCOGry.js";import"./index-DfrqfcoA.js";import"./StatCard-IxvtGR6Q.js";import"./Card-BZOhmNQA.js";import"./IconFigure-DHU2jTMM.js";import"./transition-CMC5XbQA.js";import"./react-D4X0uDZA.js";import"./PrimaryButton-RT_eZQ3H.js";import"./SpinnerWithLabel-Dc370SSn.js";import"./WithLoading-C95Ejlzf.js";import"./toastUtils-Dml8uuJS.js";import"./react-toastify.esm-Bsvahj13.js";import"./NavigationMenu-BpawNSN9.js";import"./UserAvatarOrganism-D2XUQHq1.js";import"./index-DJn7dkpv.js";import"./Overlay-VtbxZWE8.js";import"./index-9ui3ONx9.js";import"./LabelWithIcon-vWR3APy-.js";import"./index-C1fbw7la.js";import"./index-BDU6GUs4.js";const J=({children:l})=>e.jsx("h1",{className:"px-4",children:l}),V=({})=>e.jsxs(J,{className:"px-4",children:["Laporan ",e.jsx("span",{className:"font-semibold",children:"Transaksi"})]}),Y=({children:l})=>{const r={marginTop:10,paddingTop:10,borderTopWidth:2,borderTopColor:"black",textAlign:"left",fontSize:12};return e.jsx(y,{style:r,children:l})},b=({style:l={},children:r})=>{const d={...{width:"1400px",textAlign:"left"},...l};return e.jsx(y,{style:d,children:r})},N=({style:l={},children:r})=>{const d={...{flexDirection:"row",justifyContent:"space-between",width:"100%"},...l};return e.jsx(y,{style:d,children:r})},t=W.create({wideCell:{width:"1400px",textAlign:"left"},productContainer:{flexDirection:"row",justifyContent:"space-between",width:"100%"}}),K=({transactionReport:l,startDate:r="",endDate:o="",type:d="",convertDate:c=x=>x})=>{const x=l.data.reduce((n,m)=>n+m.total,0);return e.jsx(I,{children:e.jsxs(_,{style:t.page,children:[e.jsxs($,{children:["Laporan Transaksi,"," ",d!=="default"?`${c(r)} - ${c(o)}`:"Semua"]}),e.jsxs(M,{style:t.header,children:[e.jsx(a,{style:[t.cell,t.bold],children:"ID"}),e.jsx(a,{style:[t.cell,t.bold],children:"Tanggal"}),e.jsx(b,{children:e.jsxs(N,{style:t.productContainer,children:[e.jsx(a,{style:[t.cell,t.bold],children:"Nama Produk"}),e.jsx(a,{style:[t.cell,t.bold],children:"Harga Item (Rp)"}),e.jsx(a,{style:[t.cell,t.bold],children:"Jumlah Item"})]})}),e.jsx(a,{style:[t.cell,t.bold],children:"Subtotal (Rp)"}),e.jsx(a,{style:[t.cell,t.bold],children:"Total Diskon (Rp)"}),e.jsx(a,{style:[t.cell,t.bold],children:"Pendapatan (Rp)"})]}),e.jsx(A,{children:l.data.map((n,m)=>e.jsxs(H,{style:t.row,children:[e.jsx(a,{style:t.cell,children:n.id}),e.jsx(a,{style:[t.cell,{overflow:"hidden"}],children:c(n.created_at,!0)}),e.jsx(b,{children:n.details.map((p,j)=>e.jsxs(N,{style:t.productContainer,children:[e.jsx(a,{style:t.cell,children:p.product_name}),e.jsx(a,{style:t.cell,children:p.unit_price.toLocaleString()}),e.jsx(a,{style:t.cell,children:p.quantity})]},j))}),e.jsx(a,{style:t.cell,children:n.subtotal.toLocaleString()}),e.jsx(a,{style:t.cell,children:n.discount.toLocaleString()}),e.jsx(a,{style:t.cell,children:n.total.toLocaleString()})]},m))}),e.jsx(Y,{children:e.jsxs(O,{children:["Total Pendapatan: Rp ",x.toLocaleString()]})})]})})};function D(l,r=!1){const o=new Date(l),d={day:"2-digit",month:"long",year:"numeric"},c=o.toLocaleDateString("id-ID",d);if(r){const x={hour:"2-digit",minute:"2-digit",second:"2-digit"},n=o.toLocaleTimeString("id-ID",x);return`${c}, ${n}`}return c}const Q=({filterParams:l={},transactionReport:r={}})=>{const{startDate:o,endDate:d,type:c}=l,[x,n]=T.useState(!1),[m,p]=T.useState({}),j=i=>{n(!x),p(i)},g=(i,f)=>e.jsx("div",{className:"flex flex-col space-y-1",children:i.map((u,w)=>e.jsx("p",{className:"w-max",children:u[f]},`${f}-${w}`))});return e.jsxs(e.Fragment,{children:[e.jsxs(R,{className:"relative px-4 overflow-auto",children:[e.jsxs(C,{className:"sticky bg-white top-0",children:[e.jsx(s,{children:"ID"}),e.jsx(s,{children:"Tanggal"}),e.jsx(s,{className:"hidden lg:flex",children:"Nama Produk"}),e.jsx(s,{className:"hidden lg:flex",children:"Harga Item (Rp)"}),e.jsx(s,{className:"hidden lg:flex",children:"Jumlah Item"}),e.jsx(s,{className:"hidden lg:flex",children:"Subtotal (Rp)"}),e.jsx(s,{className:"hidden lg:flex",children:"Total Diskon (Rp)"}),e.jsx(s,{children:"Total (Rp)"}),e.jsxs(s,{className:"flex space-x-2 items-center",children:[e.jsx("p",{children:"Aksi"}),e.jsx(q,{document:e.jsx(K,{transactionReport:r,type:c,startDate:o,endDate:d,convertDate:D}),fileName:"Laporan-Transaksi",children:e.jsx(z,{className:"text-red-500 cursor-pointer",title:"Download Pdf",size:16})})]})]}),e.jsx(v,{children:r.data.map(i=>e.jsxs(F,{children:[e.jsx(s,{className:"text-gray-900 overflow-hidden",children:i.id}),e.jsx(s,{className:"text-gray-900",children:D(i.created_at,!0)}),e.jsx(s,{className:"text-gray-900 overflow-hidden hidden lg:flex",children:g(i.details,"product_name")}),e.jsx(s,{className:"text-gray-900 hidden lg:flex",children:e.jsx("div",{className:"flex flex-col space-y-1",children:i.details.map((f,u)=>e.jsx("p",{children:h(f.unit_price)},u))})}),e.jsx(s,{className:"text-gray-900 hidden lg:flex",children:g(i.details,"quantity")}),e.jsx(s,{className:"text-gray-900 hidden lg:flex",children:h(i.subtotal)}),e.jsx(s,{className:"text-gray-900 hidden lg:flex",children:h(i.discount)}),e.jsx(s,{className:"text-gray-700",children:h(i.total)}),e.jsx(s,{className:"text-primary",children:e.jsx("p",{onClick:()=>j(i),className:"cursor-pointer",children:"Detail"})})]},i.id))})]}),e.jsx(k,{show:x,onClose:()=>j(m),maxWidth:"max",className:"flex justify-center",children:e.jsx(L,{transaction:m,formatNumberWithDots:h})})]})};function Ce({transactionReport:l,analytics:r,filterParams:o}){const{links:d}=l,c=e.jsx(e.Fragment,{children:e.jsx(S,{title:"Laporan Transaksi"})}),x=e.jsxs(e.Fragment,{children:[e.jsx(V,{}),e.jsx(E,{routeName:"transaction-report.filter",filterParams:o}),e.jsx(P,{analytics:r}),e.jsx(Q,{filterParams:o,transactionReport:l}),e.jsx(B,{links:d,params:{startDate:l.startDate,endDate:l.endDate,type:l.type}})]});return e.jsx(G,{header:c,content:x,contentClassName:"bg-white",direction:"col-reverse"})}export{Ce as default};
