import{r as G,c as se,j as b}from"./app-DPjCS6eK.js";import{A as ie}from"./ApplicationLayout-D5sNKWdI.js";import{P as Q}from"./PrimaryButton-B0b0qNut.js";import{R as le}from"./Receipt-Cv2FqW8G.js";import{f as ae}from"./formatNumberWithDots-Do-x_jmg.js";import{d as ce}from"./index-CEc6ut8U.js";import"./react-toastify.esm-BLMg4nUG.js";var X={exports:{}};(function(N,k){(function(L,O){N.exports=O(G)})(typeof self<"u"?self:se,function(L){return function(){var O={155:function(e){e.exports=L}},V={};function T(e){var t=V[e];if(t!==void 0)return t.exports;var n=V[e]={exports:{}};return O[e](n,n.exports,T),n.exports}T.d=function(e,t){for(var n in t)T.o(t,n)&&!T.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var M={};T.r(M),T.d(M,{useReactToPrint:function(){return oe}});var Z=T(155);function d({level:e="error",messages:t,suppressErrors:n=!1}){n||(e==="error"?console.error(t):e==="warning"?console.warn(t):e==="debug"&&console.debug(t))}function q(e,t){if(t||!e){const n=document.getElementById("printWindow");n&&document.body.removeChild(n)}}function Y(e,t){const{documentTitle:n,onAfterPrint:l,onPrintError:f,preserveAfterPrint:u,print:x,suppressErrors:p}=t;setTimeout(()=>{var y,v;if(e.contentWindow)if(e.contentWindow.focus(),x)x(e).then(()=>l==null?void 0:l()).then(()=>q(u)).catch(w=>{f?f("print",w):d({messages:["An error was thrown by the specified `print` function"],suppressErrors:p})});else{if(e.contentWindow.print){const w=(v=(y=e.contentDocument)===null||y===void 0?void 0:y.title)!==null&&v!==void 0?v:"",C=e.ownerDocument.title;n&&(e.ownerDocument.title=n,e.contentDocument&&(e.contentDocument.title=n)),e.contentWindow.print(),n&&(e.ownerDocument.title=C,e.contentDocument&&(e.contentDocument.title=w))}else d({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:p});l==null||l(),q(u)}else d({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:p})},500)}function _(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let l=n.nextNode();for(;l;)t.push(l),l=n.nextNode();return t}function z(e,t,n){const l=_(e),f=_(t);if(l.length===f.length)for(let u=0;u<l.length;u++){const x=l[u],p=f[u],y=x.shadowRoot;if(y!==null){const v=p.attachShadow({mode:y.mode});v.innerHTML=y.innerHTML,z(y,v,n)}}else d({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,t],suppressErrors:n})}const ee=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function te(e,t,n,l){var f,u,x;const{contentNode:p,clonedContentNode:y,clonedImgNodes:v,clonedVideoNodes:w,numResourcesToLoad:C,originalCanvasNodes:H}=n,{bodyClass:W,fonts:j,ignoreGlobalStyles:$,pageStyle:F,nonce:E,suppressErrors:R,copyShadowRoots:D}=l;e.onload=null;const a=e.contentDocument||((f=e.contentWindow)===null||f===void 0?void 0:f.document);if(a){const I=a.body.appendChild(y);D&&z(p,I,!!R),j&&(!((u=e.contentDocument)===null||u===void 0)&&u.fonts&&(!((x=e.contentWindow)===null||x===void 0)&&x.FontFace)?j.forEach(r=>{const o=new FontFace(r.family,r.source,{weight:r.weight,style:r.style});e.contentDocument.fonts.add(o),o.loaded.then(()=>{t(o)}).catch(h=>{t(o,["Failed loading the font:",o,"Load error:",h])})}):(j.forEach(r=>t(r)),d({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:R})));const i=F??ee,A=a.createElement("style");E&&(A.setAttribute("nonce",E),a.head.setAttribute("nonce",E)),A.appendChild(a.createTextNode(i)),a.head.appendChild(A),W&&a.body.classList.add(...W.split(" "));const B=a.querySelectorAll("canvas");for(let r=0;r<H.length;++r){const o=H[r],h=B[r];if(h===void 0){d({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",o],suppressErrors:R});continue}const s=h.getContext("2d");s&&s.drawImage(o,0,0)}for(let r=0;r<v.length;r++){const o=v[r],h=o.getAttribute("src");if(h){const s=new Image;s.onload=()=>t(o),s.onerror=(c,g,S,m,P)=>t(o,["Error loading <img>",o,"Error",P]),s.src=h}else t(o,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',o])}for(let r=0;r<w.length;r++){const o=w[r];o.preload="auto";const h=o.getAttribute("poster");if(h){const s=new Image;s.onload=()=>t(o),s.onerror=(c,g,S,m,P)=>t(o,["Error loading video poster",h,"for video",o,"Error:",P]),s.src=h}else o.readyState>=2?t(o):(o.onloadeddata=()=>t(o),o.onerror=(s,c,g,S,m)=>t(o,["Error loading video",o,"Error",m]),o.onstalled=()=>t(o,["Loading video stalled, skipping",o]))}const U="select",J=p.querySelectorAll(U),ne=a.querySelectorAll(U);for(let r=0;r<J.length;r++)ne[r].value=J[r].value;if(!$){const r=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let o=0,h=r.length;o<h;++o){const s=r[o];if(s.tagName.toLowerCase()==="style"){const c=a.createElement(s.tagName),g=s.sheet;if(g){let S="";try{const m=g.cssRules.length;for(let P=0;P<m;++P)typeof g.cssRules[P].cssText=="string"&&(S+=`${g.cssRules[P].cssText}\r
`)}catch(m){d({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",s,`Original error: ${m==null?void 0:m.message}`],level:"warning"})}c.setAttribute("id",`react-to-print-${o}`),E&&c.setAttribute("nonce",E),c.appendChild(a.createTextNode(S)),a.head.appendChild(c)}}else if(s.getAttribute("href"))if(s.hasAttribute("disabled"))d({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",s],level:"warning"}),t(s);else{const c=a.createElement(s.tagName);for(let g=0,S=s.attributes.length;g<S;++g){const m=s.attributes[g];m&&c.setAttribute(m.nodeName,m.nodeValue||"")}c.onload=()=>t(c),c.onerror=(g,S,m,P,re)=>t(c,["Failed to load",c,"Error:",re]),E&&c.setAttribute("nonce",E),a.head.appendChild(c)}else d({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",s],level:"warning"}),t(s)}}}C===0&&Y(e,l)}function K(e,t,n,l){e.onload=()=>te(e,t,n,l),document.body.appendChild(e)}function oe(e){const{contentRef:t,fonts:n,ignoreGlobalStyles:l,onBeforePrint:f,onPrintError:u,preserveAfterPrint:x,suppressErrors:p}=e;return(0,Z.useCallback)(v=>{q(x,!0);const w=function({contentRef:i,optionalContent:A,suppressErrors:B}){return A&&(i&&d({level:"warning",messages:['"react-to-print" received a `contentRef` option and a optional-content param passed to its callback. The `contentRef` option will be ignored.']}),typeof A=="function")?A():i?i.current:void d({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:B})}({contentRef:t,optionalContent:v,suppressErrors:p});if(!w)return void d({messages:["There is nothing to print"],suppressErrors:p});const C=w.cloneNode(!0),H=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),W=C.querySelectorAll("img"),j=C.querySelectorAll("video"),$=n?n.length:0,F=(l?0:H.length)+W.length+j.length+$,E=[],R=[],D=function(){const i=document.createElement("iframe");return i.width=`${document.documentElement.clientWidth}px`,i.height=`${document.documentElement.clientHeight}px`,i.style.position="absolute",i.style.top=`-${document.documentElement.clientHeight+100}px`,i.style.left=`-${document.documentElement.clientWidth+100}px`,i.id="printWindow",i.srcdoc="<!DOCTYPE html>",i}(),a=(i,A)=>{E.includes(i)?d({level:"debug",messages:["Tried to mark a resource that has already been handled",i],suppressErrors:p}):(A?(d({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...A],suppressErrors:p}),R.push(i)):E.push(i),E.length+R.length===F&&Y(D,e))},I={contentNode:w,clonedContentNode:C,clonedImgNodes:W,clonedVideoNodes:j,numResourcesToLoad:F,originalCanvasNodes:w.querySelectorAll("canvas")};f?f().then(()=>K(D,a,I,e)).catch(i=>{u==null||u("onBeforePrint",i)}):K(D,a,I,e)},[e])}return M}()})})(X);var de=X.exports;const ue=N=>de.useReactToPrint({contentRef:N,onAfterPrint:()=>console.log("Printing completed!"),onPrintError:k=>console.error("Printing error:",k)}),pe=G.memo(({transaction:N})=>{const k=G.useRef(null),L=ue(k);return b.jsxs(b.Fragment,{children:[b.jsx(le,{transaction:N,formatNumberWithDots:ae,ref:k}),b.jsxs("div",{className:"flex flex-col space-y-4 w-80",children:[b.jsx(Q,{onClick:L,className:"flex justify-center border border-white bg-primary px-10 w-full",children:b.jsx("p",{children:"CETAK STRUK"})}),b.jsx(Q,{onClick:()=>ce.Inertia.get(route("transaction.index")),className:"flex justify-center bg-white w-full",children:b.jsx("p",{className:"text-primary",children:"SELESAI"})})]})]})});function we({transaction:N}){const k=b.jsx(b.Fragment,{children:b.jsx(pe,{transaction:N})});return b.jsx(ie,{contentClassName:"bg-primary items-center justify-center",content:k})}export{we as default};
